# Mangrove Carbon Estimation Pipeline Configuration

# Pipeline phases
pipeline:
  run_phase: "all"  # Options: 'label', 'prepare', 'train', 'infer', 'visualize', 'all'

# SAM-2 Annotation Settings
sam2:
  model_type: "hiera_large"  # 'hiera_large', 'hiera_base_plus', 'hiera_small', 'hiera_tiny'
  config_file: "c:/Users/aniq/OneDrive/Desktop/Mangrove Carbon Estimation/sam2/sam2/configs/sam2/sam2_hiera_l.yaml"
  checkpoint_path: "c:/Users/aniq/OneDrive/Desktop/Mangrove Carbon Estimation/sam2/checkpoints/sam2.1_hiera_large.pt"
  device: "cpu"  # 'cuda' or 'cpu' (auto-detects if cuda available)
  confidence_threshold: 0.5
  prompt_type: "point"  # 'point' or 'box' (how to guide SAM-2)

# Data Directories
data:
  images_dir: "data/raw_images/"          # Input: preprocessed .tif files
  masks_dir: "data/refined_masks/"        # Output: refined binary masks
  training_data_dir: "data/prepared/train/"     # Prepared training data
  validation_images_dir: "data/prepared/val/"
  output_dir: "results/"

# Data Format
dataset:
  mask_format: "segmentation"  # 'segmentation' (binary mask)
  train_val_split: 0.8
  image_extension: ".tif"
  mask_extension: ".png"

# Model Configuration
model:
  type: "unetpp"              # 'unetpp', 'unet', or 'deeplabv3plus'
  name: "U-Net++"
  backbone: "resnet34"        # Recommended for U-Net++
  input_channels: 3           # 3 for RGB, 4 if using NIR
  output_channels: 1          # 1 for binary segmentation (mangrove vs non-mangrove)
  input_size: [256, 256]
  learning_rate: 0.001
  batch_size: 16
  num_epochs: 50
  optimizer: "adam"
  loss_function: "bce"        # 'bce' for binary, 'cross_entropy' for multi-class
  checkpoint_path: "models/best_model.pt"

# Training
training:
  validation_split: 0.2
  early_stopping_patience: 5
  metric_to_monitor: "iou"    # 'iou', 'f1', 'accuracy'

# Carbon Estimation
carbon:
  pixel_size_m: 10            # Resolution in meters (update if your satellite is different)
  carbon_density_kg_ha: 150   # Literature-based carbon density (kg/ha, update if you have local value)
  # For mangroves: typically 100-200 tC/ha (refer to published papers)

# Logging
logging:
  log_file: "logs/pipeline.log"
  log_level: "INFO"

# Visualization
visualization:
  output_plot_path: "results/plots/"
  plot_format: "png"
  save_intermediate_results: true